<!--Monta o formulário, valida os campos e salva um novo anúncio-->
<app-navbar></app-navbar>
<div class="container">
  <form [formGroup]="anuncioForm" class="row" (submit)="salvarAnuncio()">
    <div class="col-6">
      <div class="card mt-5">
        <div class="card-body">
          <label mb-3>Url da Imagem</label>
          <textarea
            style="resize: none;"
            formControlName="url"
            class="form-control mb-3"
            placeholder="Url Imagem">
      </textarea>
          <!--            (change)="url = anuncioForm.get('url')?.value">-->
          <app-vmessage *ngIf="anuncioForm.get('url')?.errors?.minlength" [text]="'Url deve conter no mínimo 10 caracteres'"></app-vmessage>
          <h5 *ngIf="anuncioForm.get('url')?.value">Imagem Selecionada</h5>
<!--          <img *ngIf="url" [src]="url" [alt]="anuncioForm.get('titulo')?.value" style="min-width: 250px; max-width: 400px">-->
          <img *ngIf="anuncioForm.get('url')?.value" class="card-img-top img-thumbnail" [src]="anuncioForm.get('url')?.value" [alt]="anuncio?.titulo" style= "min-width: 250px; max-width: 400px">
        </div>
      </div>

    </div>
    <div class="col-6">
      <div class="card mt-5">
        <div class="card-body">
          <label class="mb-3">Título</label>
          <textarea
            style="resize: none;"
            formControlName="titulo"
            class="form-control mb-3"
            placeholder="Título">
      </textarea>
          <app-vmessage *ngIf="anuncioForm.get('titulo')?.errors?.minlength || anuncioForm.get('titulo')?.errors?.maxlength" [text]="'O título deve conter no mínimo 3 caracteres e no máximo 50 caracteres'"></app-vmessage>
          <label class="mt-5 mb-3">Mensagem</label>
          <textarea
            style="resize: none;"
            formControlName="mensagem"
            class="form-control"
            placeholder="Mensagem">
      </textarea>
          <app-vmessage *ngIf="anuncioForm.get('mensagem')?.errors?.minlength || anuncioForm.get('mensagem')?.errors?.maxlength" [text]="'A mensagem deve conter no mínimo 3 caracteres e no máximo 300 caracteres'"></app-vmessage>
        </div>
      </div>
    </div>
    <div class="text-center col-12">
      <button [disabled]="anuncioForm.invalid" type="submit" class="btn btn-primary btn-block mt-3 mr-3">
        Salvar
      </button>
      <a href="a/list" class="btn btn-secondary text-center mt-3 ml-3">Cancelar</a>
      <app-vmessage *ngIf="anuncioForm.get('mensagem')?.errors?.required" [text]="'Os campos não devem estar vazios'" class="text-center"></app-vmessage>
    </div>
  </form>
  <div class="col-12 text-center">
    <i *ngIf="anuncio.id" aria-hidden="true" class="fa fa-trash col-1 fa-2x mt-3"
       title="remover" (click)="deletarAnuncio()"
    ></i>
  </div>
</div>
